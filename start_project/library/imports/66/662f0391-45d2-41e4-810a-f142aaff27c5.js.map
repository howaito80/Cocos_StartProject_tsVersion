{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\tsVersion/assets\\scripts\\tsVersion\\Game.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAAkC;AAG5B,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAA0B,wBAAY;IADtC;QAAA,qEAyEC;QArEG,cAAQ,GAAc,IAAI,CAAC;QAG3B,YAAM,GAAW,IAAI,CAAC;QAGtB,YAAM,GAAY,IAAI,CAAC;QAGvB,gBAAU,GAAa,IAAI,CAAC;QAG5B,gBAAU,GAAY,IAAI,CAAC;QAEnB,aAAO,GAAW,CAAC,CAAC;QACpB,WAAK,GAAW,CAAC,CAAC;;IAsD9B,CAAC;IApDG,qBAAM,GAAN;QAEI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;IAC1D,CAAC;IAED,oBAAK,GAAL;QAEI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/B,iBAAiB;QACjB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,iBAAiB;IAEV,uBAAQ,GAAf;QAEI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAChB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAEM,uBAAQ,GAAf;QAEI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAClC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;IAClC,CAAC;IAEM,0BAAW,GAAlB;QAEI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAEO,2BAAY,GAApB;QAEI,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QAEzC,IAAI,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;IAEO,2BAAY,GAApB;QAEI,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;QACtD,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;QAE3E,OAAO,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACnC,CAAC;IAnED;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACO;IAG3B;QADC,QAAQ,CAAC,eAAM,CAAC;wCACK;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;4CACS;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACS;IAflB,IAAI;QADhB,OAAO;OACK,IAAI,CAwEhB;IAAD,WAAC;CAxED,AAwEC,CAxEyB,EAAE,CAAC,SAAS,GAwErC;AAxEY,oBAAI","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\tsVersion","sourcesContent":["import { Player } from \"./Player\";\r\nimport Star from \"./Star\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Game extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    starPref: cc.Prefab = null;\r\n\r\n    @property(Player)\r\n    player: Player = null;\r\n\r\n    @property(cc.Node)\r\n    ground: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    scoreLable: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    gameoverUI: cc.Node = null;\r\n\r\n    private groundY: number = 0;\r\n    private score: number = 0;\r\n\r\n    onLoad () \r\n    {\r\n        this.groundY = this.ground.y + this.ground.height / 2;\r\n    }\r\n\r\n    start () \r\n    {\r\n        this.gameoverUI.active = false;\r\n        // bind listeners\r\n        this.player.bindEventListener(true);\r\n        this.spawnNewStar();\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    public gainStar()\r\n    {\r\n        this.score += 1;\r\n        this.scoreLable.string = this.score.toString();\r\n        this.spawnNewStar();\r\n    }\r\n\r\n    public loseStar()\r\n    {\r\n        this.player.node.stopAllActions();\r\n        this.player.bindEventListener(false);\r\n        this.gameoverUI.active = true;\r\n    }\r\n\r\n    public restartGame()\r\n    {\r\n        cc.director.loadScene('game');\r\n    }\r\n\r\n    private spawnNewStar()\r\n    {\r\n        let newStar = cc.instantiate(this.starPref);\r\n        this.node.addChild(newStar);\r\n        newStar.setPosition(this.getRandomPos());\r\n        \r\n        let star = newStar.getComponent('Star');\r\n        star.init(this);\r\n    }\r\n\r\n    private getRandomPos(): cc.Vec2\r\n    {\r\n        let randomX = (Math.random() - 0.5) * this.node.width;\r\n        let randomY = this.groundY + Math.random() * (this.player.jumpHeight + 50);\r\n\r\n        return cc.v2(randomX, randomY);\r\n    }\r\n\r\n}\r\n"]}